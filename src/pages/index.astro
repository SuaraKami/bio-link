---
import { getCollection } from 'astro:content'
import logo from '@/assets/logo.svg'
import ExternalLink from '@/components/ExternalLink.astro'
import FeaturedLink from '@/components/FeaturedLink.astro'
import Layout from '@/layouts/Layout.astro'

const links = await getCollection('links')
const featuredIdx = links.findIndex((link) => link.data.featured)
const featured = links[featuredIdx]
const restLinks = links.filter((_, idx) => idx !== featuredIdx)
---

<Layout
  title="SuaraKami - Youth Initiative for Public Policy Education"
  description="SuaraKami adalah sebuah inisiatif non-profit diaspora muda Indonesia yang berpusat di Aachen, Jerman. Kami bergerak dalam lingkup demokrasi dan berdedikasi di bidang pendidikan kebijakan publik"
>
  <main class="min-h-screen bg-background text-foreground">
    <header class="px-6 pt-16 pb-12 md:px-12 md:pt-24 md:pb-16 lg:px-16 lg:pt-32 lg:pb-20">
      <div class="relative">
        <a href="/" class="mb-16 inline-block transition-opacity hover:opacity-60">
          <img src={logo.src} alt="SuaraKami" class="h-6 w-auto md:h-8" />
        </a>
        <div class="absolute -top-8 right-0 h-0.5 w-24 bg-accent md:w-32"></div>
      </div>
      <div class="mt-12 ml-auto max-w-md md:mt-16 lg:mt-20">
        <p class="text-right text-base leading-relaxed font-light md:text-lg lg:text-xl">
          Pergerakan pemuda non-profit dan non-partisan dibidang sosial politik dalam lingkup demokrasi ðŸ‡®ðŸ‡©
        </p>
      </div>
    </header>

    <section class="px-6 pb-16 md:px-12 md:pb-24 lg:px-16 lg:pb-32">
      {
        featured && (
          <FeaturedLink title={featured.data.title} description={featured.data.description} href={featured.data.url} />
        )
      }
    </section>

    <section class="px-6 pb-20 md:px-12 md:pb-32 lg:px-16 lg:pb-40">
      <div class="max-w-6xl">
        <div class="space-y-1">
          {
            restLinks.map((link, idx) => (
              <ExternalLink title={link.data.title} href={link.data.url} icon={link.data.icon} index={idx} />
            ))
          }
        </div>
      </div>
    </section>

    <footer class="border-t border-foreground/20 px-6 py-12 md:px-12 md:py-16 lg:px-16">
      <div class="flex flex-col items-start justify-between gap-12 md:flex-row md:gap-8">
        <div class="space-y-4">
          <p class="font-mono text-xs tracking-wider uppercase opacity-40">SuaraKami</p>
          <p class="max-w-md text-sm leading-relaxed font-light opacity-60 md:text-base">
            Born in Aachen, made for Indonesians everywhere
          </p>
        </div>

        <div class="flex items-center gap-2">
          <div class="h-8 w-8 bg-accent"></div>
          <p class="font-mono text-xs tracking-wider uppercase opacity-40">2025</p>
        </div>
      </div>
    </footer>
  </main>
</Layout>
